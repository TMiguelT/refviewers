{"version":3,"sources":["App.js","theme.js","index.js"],"names":["Copyright","Typography","variant","color","align","Link","href","Date","getFullYear","file","a","text","contents","example","Cite","format","Author","name","this","fullName","authorships","firstAuthorships","lastAuthorships","length","join","App","useState","setFile","error","setError","authors","useMemo","citations","Map","work","Array","isArray","author","workTitle","sanitizeHtml","title","allowedTags","allowedAttributes","forEach","i","authorObj","authorLookup","names","given","push","trim","split","family","authorId","has","get","set","from","values","getAuthors","Container","maxWidth","AppBar","position","Toolbar","Box","flexGrow","Button","my","Grid","container","spacing","alignItems","direction","item","component","gutterBottom","type","style","display","onChange","event","fileType","currentTarget","files","parseFile","then","parsed","catch","e","data","columns","label","options","sort","sortDirection","Snackbar","open","autoHideDuration","onClose","severity","theme","createMuiTheme","palette","primary","main","secondary","red","A400","background","default","ReactDOM","render","ThemeProvider","CssBaseline","document","querySelector"],"mappings":"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","file":"static/js/main.4f0059ae.chunk.js","sourcesContent":["import React, {useMemo, useState} from 'react';\nimport Container from '@material-ui/core/Container';\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\nimport Link from '@material-ui/core/Link';\nimport Button from '@material-ui/core/Button';\nimport Cite from 'citation-js';\nimport MUIDataTable from 'mui-datatables';\nimport {Grid} from '@material-ui/core';\nimport sanitizeHtml from 'sanitize-html';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport MuiAlert from '@material-ui/lab/Alert';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\n\nfunction Copyright() {\n    return (\n        <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n            {'Copyright Â© '}\n            <Link color=\"inherit\" href=\"https://material-ui.com/\">\n                Michael Milton\n            </Link>{' '}\n            {new Date().getFullYear()}\n            {'.'}\n        </Typography>\n    );\n}\n\n/**\n * Outputs CSL JSON from an arbitrary citation file\n * @returns {Promise<*>}\n */\nasync function parseFile(file) {\n    const contents = await file.text();\n    const example = new Cite(contents);\n    return example.format('data', {format: 'object'});\n}\n\nclass Author {\n    constructor(name) {\n        this.fullName = name;\n        this.authorships = [];\n        this.firstAuthorships = [];\n        this.lastAuthorships = [];\n    }\n\n    get numAuthorships() {\n        return this.authorships.length;\n    }\n\n    get textAuthorships() {\n        return this.authorships.join(', ');\n    }\n\n    get numFirstAuthorships() {\n        return this.firstAuthorships.length;\n    }\n\n    get textFirstAuthorships() {\n        return this.firstAuthorships.join(', ');\n    }\n\n    get numLastAuthorships() {\n        return this.lastAuthorships.length;\n    }\n\n    get textLastAuthorships() {\n        return this.lastAuthorships.join(', ');\n    }\n}\n\n/**\n * Returns an ID used to key a dictionary, unique to a certain author\n * @param author\n */\nfunction authorId(author) {\n    const names = [];\n    if ('given' in author && author.given.length > 0) {\n        names.push(author.given.trim().split(' ')[0]);\n    }\n    if ('family' in author && author.family.length > 0) {\n        names.push(author.family.trim().split(' ')[0]);\n    }\n    return names.join('|');\n}\n\n/**\n * Converts the citation file into an array of author objects\n * @param citations\n * @returns {any[]}\n */\nfunction getAuthors(citations) {\n    const authors = new Map();\n    for (let work of citations) {\n        if (!Array.isArray(work.author)) {\n            continue;\n        }\n        const workTitle = sanitizeHtml(work.title, {\n            allowedTags: [],\n            allowedAttributes: {}\n        });\n        work.author.forEach((author, i) => {\n\n            const authorLookup = authorId(author);\n            let authorObj;\n            if (!authors.has(authorLookup)) {\n                authorObj = new Author(author.given + ' ' + author.family);\n                authors.set(authorLookup, authorObj);\n            }\n            else {\n                authorObj = authors.get(authorLookup);\n            }\n\n            authorObj.authorships.push(workTitle);\n            if (i === 0) {\n                authorObj.firstAuthorships.push(workTitle);\n            }\n            if (i === work.author.length - 1) {\n                authorObj.lastAuthorships.push(workTitle);\n            }\n\n        });\n    }\n\n    return Array.from(authors.values());\n}\n\nexport default function App() {\n    const [file, setFile] = useState();\n    const [error, setError] = useState(null);\n    const authors = useMemo(() => {\n        if (file) {\n            return getAuthors(file);\n        }\n    }, [file]);\n\n    return (\n        <Container maxWidth=\"md\">\n            <AppBar position=\"static\">\n                <Toolbar>\n                    <Box flexGrow={1}>\n                        <Typography variant=\"h2\">\n                            refviewers\n                        </Typography>\n                    </Box>\n                    <Button href=\"https://github.com/TMiguelT/refviewers\" color=\"inherit\">GitHub</Button>\n                </Toolbar>\n            </AppBar>\n            <Box my={4}>\n                <Grid container spacing={2} alignItems={'center'} direction={'column'}>\n                    <Grid item>\n                        <Typography variant=\"body1\" component=\"h1\" gutterBottom>\n                            refviewers is a simple browser utility for recommending reviewers for your manuscript, in\n                            case you are submitting a paper to a journal that requires this.\n                        </Typography>\n                        <Typography variant=\"body1\" component=\"h1\" gutterBottom>\n                            The general idea is that the authors in the papers that you have cited are more likely to \n                            be well-informed reviewers, and the more papers of theirs you have cited, the more\n                            relevant they will be. Thus, <code>refviewers</code> produces a table sorted by the number \n                            of times you have cited each.\n                        </Typography>\n                        <Typography variant=\"body1\" component=\"h1\" gutterBottom>\n                            To use, simply upload a RIS, BibTeX or CSL-JSON file generated by your citation manager.\n                        </Typography>\n                    </Grid>\n                    <Grid item>\n                        <Button\n                            variant=\"contained\"\n                            component=\"label\"\n                        >\n                            Upload File\n                            <input\n                                type=\"file\"\n                                style={{display: 'none'}}\n                                onChange={event => {\n                                    const fileType = event.currentTarget.files[0].type;\n                                    parseFile(event.currentTarget.files[0]).then(parsed => setFile(parsed)).catch(e => {\n                                        setError(`Invalid file type! You provided ${fileType}, which is not supported.`);\n                                    });\n                                }}\n                            />\n                        </Button>\n                    </Grid>\n                    <Grid item>\n                        {file &&\n                        <MUIDataTable\n                            title={'Authors'}\n                            data={authors}\n                            columns={[\n                                {\n                                    name: 'fullName',\n                                    label: 'Full Name',\n                                    options: {\n                                        sort: false,\n                                    }\n                                },\n                                {\n                                    name: 'textAuthorships',\n                                    label: 'All Authorships',\n                                    options: {\n                                        sort: false,\n                                    }\n                                },\n                                {\n                                    name: 'numAuthorships',\n                                    label: 'Total Authorships',\n                                    options: {\n                                        sort: true,\n                                        sortDirection: 'desc',\n                                    }\n                                },\n                                {\n                                    name: 'textFirstAuthorships',\n                                    label: 'First Authorships',\n                                    options: {\n                                        sort: false,\n                                        display: false\n                                    }\n                                },\n                                {\n                                    name: 'numFirstAuthorships',\n                                    label: 'Total First Authorships',\n                                    options: {\n                                        sort: true,\n                                    }\n                                },\n                                {\n                                    name: 'textLastAuthorships',\n                                    label: 'Last Authorships',\n                                    options: {\n                                        sort: false,\n                                        display: false\n                                    }\n                                },\n                                {\n                                    name: 'numLastAuthorships',\n                                    label: 'Total Last Authorships',\n                                    options: {\n                                        sort: true,\n                                    }\n                                },\n                            ]}\n                        />\n                        }\n                    </Grid>\n                    <Grid item>\n                        <Copyright/>\n                    </Grid>\n                </Grid>\n            </Box>\n            <Snackbar open={!!error} autoHideDuration={6000} onClose={() => setError(null)}>\n                <MuiAlert variant={'filled'} onClose={() => setError(null)} severity=\"error\">\n                    {error || ''}\n                </MuiAlert>\n            </Snackbar>\n        </Container>\n    );\n}\n","import { red } from '@material-ui/core/colors';\nimport { createMuiTheme } from '@material-ui/core/styles';\n\n// A custom theme for this app\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: '#556cd6',\n    },\n    secondary: {\n      main: '#19857b',\n    },\n    error: {\n      main: red.A400,\n    },\n    background: {\n      default: '#fff',\n    },\n  },\n});\n\nexport default theme;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport App from './App';\nimport theme from './theme';\n\nReactDOM.render(\n  <ThemeProvider theme={theme}>\n    <CssBaseline />\n    <App />\n  </ThemeProvider>,\n  document.querySelector('#root'),\n);\n"],"sourceRoot":""}